
<Project ToolsVersion="14.0">

  <PropertyGroup>
    <RazorSdkBuildTasksAssembly>.\Microsoft.NET.Sdk.Razor.Tasks.dll</RazorSdkBuildTasksAssembly>
    <_RazorSdkToolAssembly>.\rzc.dll</_RazorSdkToolAssembly>
  </PropertyGroup>

  <PropertyGroup Condition="'$(DOTNET_HOST_PATH)' == ''">
    <_RazorSdkDotNetHostDirectory>$(NetCoreRoot)</_RazorSdkDotNetHostDirectory>
    <_RazorSdkDotNetHostFileName>dotnet</_RazorSdkDotNetHostFileName>
    <_RazorSdkDotNetHostFileName Condition="'$(OS)' == 'Windows_NT'">dotnet.exe</_RazorSdkDotNetHostFileName>
  </PropertyGroup>

  <PropertyGroup>
    <RazorLangVersion>8.0</RazorLangVersion>

    <RazorGenerateIntermediateOutputPath>$(IntermediateOutputPath)Razor\</RazorGenerateIntermediateOutputPath>

    <_RazorComponentDeclarationOutputPath>$(IntermediateOutputPath)RazorDeclaration\</_RazorComponentDeclarationOutputPath>

    <UseRazorBuildServer>true</UseRazorBuildServer>
  </PropertyGroup>

  <Import Project=".\Microsoft.NET.Sdk.Razor.Component.targets" />

  <Import Project=".\Microsoft.NET.Sdk.Razor.SourceGenerators.targets" />

  <Target Name="AssignRazorComponentTargetPaths">
    <ItemGroup>
      <RazorComponent Include="@(Content)" Condition="'%(Content.Extension)'=='.razor'" />
    </ItemGroup>
	  
    <AssignTargetPath Files="@(RazorComponent)" RootFolder="$(MSBuildProjectDirectory)">
      <Output TaskParameter="AssignedFiles" ItemName="RazorComponentWithTargetPath" />
    </AssignTargetPath>

    <ItemGroup>
      <RazorComponentWithTargetPath>
        <GeneratedOutput>$(RazorGenerateIntermediateOutputPath)%(RazorComponentWithTargetPath.TargetPath)$(RazorGenerateOutputFileExtension)</GeneratedOutput>
        <GeneratedDeclaration>$(_RazorComponentDeclarationOutputPath)%(RazorComponentWithTargetPath.TargetPath)$(RazorGenerateOutputFileExtension)</GeneratedDeclaration>
      </RazorComponentWithTargetPath>
    </ItemGroup>
  </Target>

  <Target
    Name="RazorGenerateDesignTime"
    Returns="@(RazorGenerateWithTargetPath)">
  </Target>


  <Target
    Name="RazorGenerateComponentDesignTime"
	DependsOnTargets="$(_RazorGenerateComponentDesignTimeDependsOn)"
	Returns="@(RazorComponentWithTargetPath)">
  </Target>

</Project>
